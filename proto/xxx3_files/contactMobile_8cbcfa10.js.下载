(function(e,a){e.Faptcha||(e.Faptcha={reload:function(){var b=document.createElement("script");b.type="text/javascript";if(0!=a("#faptcha_server").length){b.src=a("#faptcha_server").val()+"?action\x3dreload\x26k\x3d"+a("#faptcha_public_key").val()+"\x26c\x3d"+a("#faptcha_challenge_field").val();var c=document.getElementsByTagName("head");c=!c||1>c.length?document.body:c[0];c.appendChild(b)}},finish_reload:function(b){var c=a("#faptcha_public_key").val(),d=a("#faptcha_server").val();a("#faptcha_challenge_field").val(b);
b=d+"?action\x3dimage\x26k\x3d"+c+"\x26c\x3d"+b;a("#faptcha_image_img")[0].src=b}});Faptcha.reload();({$form:a(".J-contactUS-form"),serviceMust:null,serviceMustMobile:null,isSubmit:!1,_init:function(){this._event();this._validate();this._callParentHeight()},_event:function(){var b=this;a(".J-faptcha-reloadBtn").on("click",function(a){Faptcha.reload()});a(".J-cancle").on("click",function(a){window.parent&&window.parent.MIR.closeContactiFrame()});a(".J-service").on("click",function(){a('.error[for\x3d"serviceMust"]').hide();
b._callParentHeight()});a(".J-service-m").on("click",function(){a('.error[for\x3d"serviceMustMobile"]').hide();"0"===a(this).attr("data-clicked")?(a(this).attr("data-clicked","1"),a(this).css({border:"1px solid #1470cc"}),a(this).children(".J-triangle").addClass("triangle")):(a(this).attr("data-clicked","0"),a(this).css({border:"1px solid #ced3d9"}),a(this).children(".J-triangle").removeClass("triangle"))})},_validate:function(){var b=this;b.$form.validate({errorWrap:!0,highlight:function(a,d){b._callParentHeight()},
unhighlight:function(a,d){b._callParentHeight()},rules:{serviceMust:{serviceMust:!0},serviceMustMobile:{serviceMustMobile:!0},comName:{required:!0,maxlength:160},userName:{required:!0,maxlength:30},userEmail:{required:!0,maxlength:160,email:!0},userTel:{required:!0,maxlength:40,tel:!0},wechatOrQq:{maxlength:40},content:{maxlength:1E3},faptcha_response_field:{required:!0}},messages:{serviceMust:{serviceMust:"请至少选择一项您感兴趣的服务"},serviceMustMobile:{serviceMustMobile:"请至少选择一项您感兴趣的服务"},comName:{required:"请填写贵司名称",
maxlength:"贵司名称最多可以填写160个字符"},userName:{required:"请填写联系人姓名",maxlength:"姓名最多只可填写30个字符"},userEmail:{required:"请填写您的邮箱",maxlength:"邮箱最多可以填写160个字符",email:"请填写正确的邮箱地址"},userTel:{required:"请填写您的电话",maxlength:"电话最多可以填写40个字符",tel:"请填写有效的电话号码"},wechatOrQq:{maxlength:"最多可以填写40个字符"},content:{maxlength:"内容最多可以输入1000个字"},faptcha_response_field:{required:"请填写验证码"}},submitHandler:function(){var b=new util.Serialize;a.ajax({url:"/contact-new",type:"POST",cache:!1,data:b.parse(".J-contactUS-form"),success:function(b){if(b.success)a(".J-contact-us-m").hide(),
a(".J-contact-us-overlay").hide(),bubble("提交成功，我们将尽快与您联系！","success",3E3);else{var c=b.data.errors.validateCode;b=b.data.errors;var d="";c&&(a(".J-validate-code").text(c),a(".J-validate-code").show());if(b){for(var e in b)d+=b[e];a(".J-alert-wrong").show();a(".J-alert-cont").text(d)}}},error:function(b){Faptcha.reload();a(".J-alert-wrong").show();a(".J-alert-cont").text("网络异常（系统异常）提交失败，请重新尝试")}})}});a.validator.addMethod("tel",function(b,d){b=a.trim(b);return!b||/^[ a-zA-Z0-9\+\(\)\-\*\~\.\/]{1,40}$/.test(b)});
a.validator.addMethod("serviceMust",function(c,d){b._serviceMust(a(".J-service"),b.$form);return b.serviceMust});a.validator.addMethod("serviceMustMobile",function(c,d){b._serviceMustMobile(a(".J-service-m"),b.$form);return b.serviceMustMobile})},_getHeight:function(){return a(".J-contact-content").height()},_callParentHeight:function(){var b=this;setTimeout(function(){window.parent&&window.parent.MIR.setiFrameHeight(b._getHeight()+43)},200)},_serviceMust:function(b){for(var a=0;a<b.length;a++)if(b[a].checked){this.serviceMust=
!0;break}else this.serviceMust=!1;return this.serviceMust},_serviceMustMobile:function(a){for(var b=0;b<a.length;b++)if("1"===a[b].getAttribute("data-clicked")){this.serviceMustMobile=!0;break}else this.serviceMustMobile=!1;return this.serviceMustMobile}})._init()})(window,jQuery);