<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>

<body>


  <script>
    网络请求异常的情况：
    window.onerror = function (msg, url, row, col, error) {
        console.log('我知道错误了');
        console.log({msg, url, row, col, error})
        return true
    };

    // 捕获静态资源加载异常
    //   window.addEventListener('error',error=> { 
    //     console.log('我知道错误了',error);
    // },true)

    // Promise Catch
    window.addEventListener("unhandledrejection", function (e) {
      // @prop {Promise} promise - 状态为rejected的Promise实例
      // @prop {String|Object} reason - 异常信息或rejected的内容

      //如果去掉控制台的异常显示，需要加上： e.preventDefault()
      e.preventDefault()
      console.log('我知道 promise 的错误了');
      console.log(e.reason);
      return true;
    });
    Promise.reject('promise error');
    new Promise((resolve, reject) => {
      reject('promise error');
    });
    new Promise((resolve) => {
      resolve();
    }).then(() => {
      throw 'promise error'
    });


    // window.addEventListener('error', (msg, url, row, col, error) => {
    //   console.log('我知道 404 错误了');
    //   console.log(
    //     msg, url, row, col, error
    //   );
    //   return true;
    // }, true);
  </script>
  <img src="a.png" alt="" srcset="">
</body>

</html>